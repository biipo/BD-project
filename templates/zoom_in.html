{% extends 'base.html' %}
{% block title %}{{item.product_name}}{% endblock %}
{% block content %}
<div class="container-big">
    <h1>{{ item.product_name }}</h1>
    <div class="flex">
        <div class="col-3 m-1">
            <img class="mw-100 mh-100" src="{{ url_for('uploaded_file', filename=item.image_filename)}}"/>
        </div>
        <div class="col-7 m-1">
            <div class="product-details">
                {% for tag in item.tags %}
                    {% if tag.tag.tag_group.name == 'Dimensions' %}
                        <div id="brand" class="muted">Dimensions: {{ tag.tag.value }}</div>
                    {% endif %}
                    {% if tag.tag.tag_group.name == 'Color' %}
                        <div id="brand" class="muted">Color: {{ tag.tag.value }}</div>
                    {% endif %}
                    {% if tag.tag.tag_group.name == 'Brand' %}
                        <div id="brand" class="muted">Brand: {{ tag.tag.value }}</div>
                    {% endif %}
                {% endfor %}
                <div id="" class="larger bold mt-1"><p class="py-.25 px-.5 bg-success inline block border-r">{{ item.price }}â‚¬</p></div>
                <div class="product-availability mt-.5">
                    <p class="{% if item.availability <=5 %} bg-severe border-r p-.25 {% endif %} inline block">{{ item.availability }} pezzi disponibili</p>
                </div>
                <form class="mt-.5" method="post" onsubmit="">
                    <div class="quantity-container mt-.25">
                        <label for="quantity" class="quantity-label inline block pr-.5">Quantity:</label>
                        <input type="number" id="quantity" name="quantity" style="max-width:5em;" class="quantity-input inline block" value="1" min="1" max="{{ item.availability }}">
                    </div>
                    <button href="#" class="" type="submit">Add to Cart</button>
                </form>
                <div class="product-description mt-.5"> 
                    <details open>
                        <summary>Description</summary>
                        <p>{{ item.descr }}<p>
                    </details>
                </div>
                <div class="seller-info small py-.25">
                    <p class="muted inline block">Sold by: <a href="#">{{item.seller.username}}</a></p>
                </div> 
            </div>
        </div>
    </div>
    <div>
        <h2>Recensioni</h2>
        {% if not item.reviews %}
            <p class="muted">There are no reviews for this product...</p>
        {% else %}
            {% for review in item.reviews %}
                <details open>
                    <summary>{{review.user.username}} - {% for _ in range(review.stars) %}<i class="bi bi-star-fill"></i>{% endfor %} </summary>
                    {{review.review}}
                </details>
            {% endfor %}
        {% endif %}
    </div>
</div>
{% endblock %}
